"use strict";(self["webpackChunkstatic"]=self["webpackChunkstatic"]||[]).push([[442],{9442:function(e,l,a){a.r(l),a.d(l,{default:function(){return c}});var t=a(3396),r=a(4870),o=a(2748),n=a(1728),u=a(4834);const i={class:"container"},d={class:"dialog-footer"};var m=(0,t.aZ)({__name:"Menu",setup(e){(0,r.iH)("140px");const l=(0,r.qj)({pageNum:1,pageSize:10,name:"",menuDesc:"",url:""}),a=(0,r.qj)({menus:[],level1Menus:[],total:0,iconList:[],levels:[{key:1,label:"一级"},{key:2,label:"二级"}]}),m=()=>({backgroundColor:"#f5f5f5",color:"#333",fontWeight:"bold"}),s=()=>{(0,n.Z)({url:"/menus/list",method:"post",data:l,params:{pageNum:l.pageNum,pageSize:l.pageSize}}).then((e=>{"OK"==e.data.state?(a.menus=e.data.body.menus.list,a.total=e.data.body.menus.total,a.level1Menus=e.data.body.level1Menus,a.level1Menus.unshift({name:"-",menuDesc:"根菜单",url:"/",parentId:"",menuLevel:0}),a.iconList=e.data.body.iconList):(0,u.WI)(e.data.errorMessage,"warning")})).catch((e=>{(0,u.WI)("请求异常","error")}))},p=(0,r.iH)(!1),c=(0,r.iH)("新增菜单"),g=(0,r.qj)({name:"",menuDesc:"",urlType:"route:",url:"",parentId:"-",menuLevel:1,iconName:"LogIcon",orderIndex:0,show:function(){this.url.startsWith("inner:")?(this.urlType="inner:",this.url=this.url.substring(6)):this.url.startsWith("http")?this.urlType="http:":this.urlType="route:"},save:function(){"route:"==this.urlType||"inner:"==this.urlType&&(this.url=this.urlType+this.url)}}),w=(0,r.iH)(),f=(0,r.qj)({name:[{required:!0,message:"不能为空",trigger:"blur"}],menuDesc:[{required:!0,message:"不能为空",trigger:"blur"}],url:[{required:!0,message:"不能为空",trigger:"blur"}],parentId:[{required:!0,message:"不能为空",trigger:"blur"}],menuLevel:[{required:!0,message:"不能为空",trigger:"blur"}],iconName:[{required:!0,message:"不能为空",trigger:"blur"}],orderIndex:[{required:!0,message:"不能为空",trigger:"blur"}]}),h=async e=>{e&&await e.validate(((e,l)=>{e&&(g.save(),(0,n.Z)({url:"/menus/menu",method:"新增菜单"==c.value?"post":"put",data:g}).then((e=>{"OK"==e.data.state?((0,u.WI)(e.data.body,"success"),p.value=!1,s()):(0,u.WI)(e.data.errorMessage,"warning")})).catch((e=>{(0,u.WI)("请求异常","error")})))}))},b=()=>{p.value=!0,c.value="新增菜单",g.name="",g.menuDesc="",g.url="",g.parentId="-",g.menuLevel=1,g.iconName="LogIcon",g.orderIndex=0},v=e=>{p.value=!0,c.value="编辑菜单",g.id=e.row.id,g.name=e.row.name,g.menuDesc=e.row.menuDesc,g.url=e.row.url,g.show(),g.parentId=e.row.parentId,g.menuLevel=e.row.menuLevel,g.iconName=e.row.iconName,g.orderIndex=e.row.orderIndex},W=e=>{(0,n.Z)({url:"/menus/menu",method:"delete",params:{name:e.row.name}}).then((e=>{"OK"==e.data.state?((0,u.WI)(e.data.body,"success"),s()):(0,u.WI)(e.data.errorMessage,"warning")})).catch((e=>{(0,u.WI)("请求异常","error")}))};(0,t.bv)((()=>{console.log("页面加载后"),s()}));const y=(e,l)=>{let a;return function(...t){const r=self;a&&clearTimeout(a),a=setTimeout((()=>{e.apply(r,t)}),l)}},_=window.ResizeObserver;return window.ResizeObserver=class extends _{constructor(e){e=y(e,20),super(e)}},(e,n)=>{const u=(0,t.up)("el-divider"),y=(0,t.up)("el-input"),_=(0,t.up)("el-form-item"),k=(0,t.up)("el-button"),V=(0,t.up)("el-popconfirm"),I=(0,t.up)("el-table-column"),z=(0,t.up)("el-table"),U=(0,t.up)("el-pagination"),x=(0,t.up)("el-form"),C=(0,t.up)("el-option"),D=(0,t.up)("el-select"),L=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t.Wm)(u,{"content-position":"left"},{default:(0,t.w5)((()=>[(0,t.Uk)("查询条件")])),_:1}),(0,t.Wm)(x,{model:l,size:"small","label-position":"right","inline-message":"",inline:!0},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{label:"菜单名称",prop:"name"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{modelValue:l.name,"onUpdate:modelValue":n[0]||(n[0]=e=>l.name=e),placeholder:"请输入..."},null,8,["modelValue"])])),_:1}),(0,t.Wm)(_,{label:"菜单url",prop:"url"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{modelValue:l.url,"onUpdate:modelValue":n[1]||(n[1]=e=>l.url=e),placeholder:"请输入..."},null,8,["modelValue"])])),_:1}),(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.Wm)(k,{type:"primary",size:"small",onClick:n[2]||(n[2]=e=>s())},{default:(0,t.w5)((()=>[(0,t.Uk)("查询")])),_:1}),(0,t.Wm)(k,{type:"success",icon:(0,r.SU)(o.I8b),circle:"",onClick:n[3]||(n[3]=e=>b()),title:"新增菜单"},null,8,["icon"])])),_:1}),(0,t.Wm)(u,{"content-position":"left"},{default:(0,t.w5)((()=>[(0,t.Uk)("查询结果")])),_:1}),(0,t.Wm)(z,{data:a.menus,style:{width:"100%"},border:!0,"table-layout":"fixed",stripe:!0,size:"small","highlight-current-row":!0,"header-cell-style":m},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{fixed:"left",label:"操作",width:"180","header-align":"center",align:"center"},{default:(0,t.w5)((e=>[(0,t.Wm)(k,{link:"",type:"primary",size:"small",onClick:l=>v(e)},{default:(0,t.w5)((()=>[(0,t.Uk)("编辑 ")])),_:2},1032,["onClick"]),(0,t.Wm)(V,{title:"你确定要删除本条记录吗?",onConfirm:l=>W(e),"icon-color":"red","confirm-button-type":"danger"},{reference:(0,t.w5)((()=>[(0,t.Wm)(k,{link:"",type:"danger",size:"small"},{default:(0,t.w5)((()=>[(0,t.Uk)("删除 ")])),_:1})])),_:2},1032,["onConfirm"])])),_:1}),(0,t.Wm)(I,{prop:"name",label:"菜单名称","show-overflow-tooltip":!0,"header-align":"center",align:"center"}),(0,t.Wm)(I,{prop:"menuDesc",label:"菜单描述","show-overflow-tooltip":!0,"header-align":"center",align:"center"}),(0,t.Wm)(I,{prop:"url",label:"菜单url","show-overflow-tooltip":!0,"header-align":"center",align:"center"}),(0,t.Wm)(I,{prop:"iconName",label:"图标","show-overflow-tooltip":!0,"header-align":"center",align:"center"}),(0,t.Wm)(I,{prop:"parentId",label:"父菜单","show-overflow-tooltip":!0,"header-align":"center",align:"center"}),(0,t.Wm)(I,{prop:"menuLevel",label:"菜单层级","show-overflow-tooltip":!0,"header-align":"center",align:"center"}),(0,t.Wm)(I,{prop:"orderIndex",label:"顺序","show-overflow-tooltip":!0,"header-align":"center",align:"center"}),(0,t.Wm)(I,{prop:"fmtCreatedAt",label:"创建时间","show-overflow-tooltip":!0,"header-align":"center",align:"center"}),(0,t.Wm)(I,{prop:"fmtUpdatedAt",label:"修改时间","show-overflow-tooltip":!0,"header-align":"center",align:"center"})])),_:1},8,["data"]),(0,t.Wm)(U,{class:"page","page-size":l.pageSize,"onUpdate:pageSize":n[4]||(n[4]=e=>l.pageSize=e),"current-page":l.pageNum,"onUpdate:currentPage":n[5]||(n[5]=e=>l.pageNum=e),layout:"->, total, sizes, prev, pager, next, jumper",total:a.total,"onUpdate:total":n[6]||(n[6]=e=>a.total=e),onSizeChange:n[7]||(n[7]=e=>s()),onCurrentChange:n[8]||(n[8]=e=>s()),onPrevClick:n[9]||(n[9]=e=>s()),onNextClick:n[10]||(n[10]=e=>s()),small:!0,background:!0,"page-sizes":[5,10,20,50,100]},null,8,["page-size","current-page","total"])])),_:1},8,["model"]),(0,t.Wm)(L,{modelValue:p.value,"onUpdate:modelValue":n[21]||(n[21]=e=>p.value=e),title:c.value,draggable:""},{footer:(0,t.w5)((()=>[(0,t._)("span",d,[(0,t.Wm)(k,{onClick:n[19]||(n[19]=e=>p.value=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取消")])),_:1}),(0,t.Wm)(k,{type:"primary",onClick:n[20]||(n[20]=e=>h(w.value))},{default:(0,t.w5)((()=>[(0,t.Uk)("保存")])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(x,{model:g,"label-position":"right",size:"small",inline:!1,ref_key:"formRef",ref:w,rules:f,"label-width":"20%"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{label:"菜单名称：",prop:"name"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{modelValue:g.name,"onUpdate:modelValue":n[11]||(n[11]=e=>g.name=e),type:"text",disabled:"编辑菜单"==c.value},null,8,["modelValue","disabled"])])),_:1}),(0,t.Wm)(_,{label:"菜单描述",prop:"menuDesc"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{modelValue:g.menuDesc,"onUpdate:modelValue":n[12]||(n[12]=e=>g.menuDesc=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(_,{label:"菜单url：",prop:"url"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{modelValue:g.url,"onUpdate:modelValue":n[14]||(n[14]=e=>g.url=e),class:"input-with-select"},{prepend:(0,t.w5)((()=>[(0,t.Wm)(D,{modelValue:g.urlType,"onUpdate:modelValue":n[13]||(n[13]=e=>g.urlType=e),placeholder:"请选择",style:{width:"90px"},size:"small"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{label:"路由",value:"route:"}),(0,t.Wm)(C,{label:"内部地址",value:"inner:"}),(0,t.Wm)(C,{label:"外部地址",value:"http:"})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(_,{label:"父菜单",prop:"parentId"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{modelValue:g.parentId,"onUpdate:modelValue":n[15]||(n[15]=e=>g.parentId=e),placeholder:"请选择",size:"small",filterable:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.level1Menus,(e=>((0,t.wg)(),(0,t.j4)(C,{key:e.name,label:e.menuDesc,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(_,{label:"菜单层级",prop:"menuLevel"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{modelValue:g.menuLevel,"onUpdate:modelValue":n[16]||(n[16]=e=>g.menuLevel=e),placeholder:"请选择",size:"small"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.levels,(e=>((0,t.wg)(),(0,t.j4)(C,{key:e.key,label:e.label,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(_,{label:"图标",prop:"iconName"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{modelValue:g.iconName,"onUpdate:modelValue":n[17]||(n[17]=e=>g.iconName=e),placeholder:"请选择",size:"small",filterable:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.iconList,(e=>((0,t.wg)(),(0,t.j4)(C,{key:e.key,label:e.value,value:e.key},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(_,{label:"顺序",prop:"orderIndex"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{modelValue:g.orderIndex,"onUpdate:modelValue":n[18]||(n[18]=e=>g.orderIndex=e),type:"number"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),s=a(89);const p=(0,s.Z)(m,[["__scopeId","data-v-2b4c74c3"]]);var c=p}}]);
//# sourceMappingURL=442.1c4c2f34.js.map