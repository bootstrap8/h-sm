"use strict";(self["webpackChunkstatic"]=self["webpackChunkstatic"]||[]).push([[139],{3139:function(e,l,n){n.r(l),n.d(l,{default:function(){return v}});n(7658);var t=n(3396),a=n(7139),u=n(4870),s=n(2748),i=n(3824),o=n(1728),r=n(4834),d=n(2321);const m={class:"common-layout"},c={style:{display:"flex","align-items":"center"}},w={style:{"margin-right":"10px","margin-left":"0px",padding:"0","font-size":"0.6em"}},f={style:{height:"calc(100% - 60px)",width:"100%"}};var h=(0,t.aZ)({__name:"top",setup(e){const l=(0,u.qj)({currentPage:"主页",user:{},adminMenus:[],menus:[]}),h=(0,u.qj)({}),g=()=>{(0,o.Z)({url:"/system/logout",method:"post"}).then((e=>{"OK"==e.data.state?i.Z.push({path:"/login"}):(0,r.WI)(e.data.errorMessage,"warning")})).catch((e=>{(0,r.WI)("请求异常","error")}))};(0,t.bv)((()=>{(0,o.Z)({url:"/system/user",method:"get"}).then((e=>{if("OK"==e.data.state){let n=e.data.body.user;l.user.userName=n.userName,l.user.isAdmin=n.admin,l.menus=n.menus,l.adminMenus=e.data.body.allMenus,l.adminMenus&&l.adminMenus.length>0&&l.adminMenus.forEach((e=>{h[e.url]=e.menuDesc,e.menus&&e.menus.length>0&&e.menus.forEach((e=>{h[e.url]=e.menuDesc}))}))}})).catch((e=>{(0,r.WI)("请求异常","error")}))}));const p=e=>(0,t.up)(e),v=(0,u.iH)(!1),y=(0,u.iH)("1"),_=(0,u.iH)(""),b=(0,u.iH)([]),W=e=>{let a;if(e.startsWith("http:")||e.startsWith("https:"))window.open(e,"_blank");else{y.value=e;let s=h[e];l.currentPage=s;const i=b.value.find((l=>l.name===e));if(!i){if(e.startsWith("inner:")){const l=e.substring(6);console.log("iframeUrl: ",l),a=(0,t.aZ)({setup(){const e=(0,u.iH)(null),n=(0,u.iH)(!0),t=()=>{if(e.value&&e.value.contentWindow?.document.body){const l=e.value.contentWindow.document.body.scrollHeight;e.value.style.height=`${l}px`,console.log("iframe 高度已调整:",l);const t=new MutationObserver((()=>{const l=e.value.contentWindow.document.body.scrollHeight;e.value.style.height=`${l}px`,console.log("iframe 高度动态调整:",l)}));t.observe(e.value.contentWindow.document.body,{childList:!0,subtree:!0}),n.value=!1}};return{iframeUrl:l,onIframeLoad:t,iframe:e,isLoading:n}},render(){return(0,t.h)("div",{style:{width:"100%",height:"100%",position:"relative"}},[this.isLoading?(0,t.h)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},"加载中..."):null,(0,t.h)("iframe",{src:this.iframeUrl,style:{width:"100%",height:"100%",border:"none"},onLoad:this.onIframeLoad,ref:"iframe"})])}})}else a=(0,t.RC)((()=>n(1480)(`./views${e}.vue`).then((e=>(console.log("组件加载成功:",e.default),e))).catch((e=>{throw console.error("组件加载失败:",e),e}))));b.value.push({name:e,label:s,component:(0,u.Xl)(a)})}_.value=e}},L=e=>{const l=b.value.findIndex((l=>l.name===e));b.value.splice(l,1),e===_.value&&(_.value=b.value[0]?.name||"")},x=()=>{window.location.reload()},k=(e,l)=>{let n;return function(...t){const a=self;n&&clearTimeout(n),n=setTimeout((()=>{e.apply(a,t)}),l)}},j=window.ResizeObserver;return window.ResizeObserver=class extends j{constructor(e){e=k(e,20),super(e)}},(e,n)=>{const i=(0,t.up)("el-icon"),o=(0,t.up)("el-menu-item"),r=(0,t.up)("el-sub-menu"),h=(0,t.up)("el-menu"),k=(0,t.up)("el-header"),j=(0,t.up)("el-tab-pane"),D=(0,t.up)("el-tabs"),H=(0,t.up)("el-container");return(0,t.wg)(),(0,t.iD)("div",m,[(0,t.Wm)(H,null,{default:(0,t.w5)((()=>[(0,t.Wm)(k,{class:"header"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{class:"el-menu-demo","default-active":y.value,collapse:v.value,onSelect:W,mode:"horizontal",ellipsis:!1,"popper-effect":"dark",style:{"overflow-x":"auto"}},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{onClick:x},{title:(0,t.w5)((()=>[(0,t.Uk)("主页")])),default:(0,t.w5)((()=>[(0,t.Wm)(i,{size:"20"},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.j4)((0,t.LL)(p("HomeIcon"))))])),_:1})])),_:1}),l.user.isAdmin?((0,t.wg)(!0),(0,t.iD)(t.HY,{key:0},(0,t.Ko)(l.adminMenus,(e=>((0,t.wg)(),(0,t.iD)(t.HY,null,[e.menus&&e.menus.length>0?((0,t.wg)(),(0,t.j4)(r,{key:0,index:e.url},{title:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.j4)((0,t.LL)(p(e.iconName))))])),_:2},1024),(0,t._)("span",null,(0,a.zw)(e.menuDesc),1)])),default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.menus,(e=>((0,t.wg)(),(0,t.j4)(o,{index:e.url},{title:(0,t.w5)((()=>[(0,t.Uk)((0,a.zw)(e.menuDesc),1)])),default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.j4)((0,t.LL)(p(e.iconName))))])),_:2},1024)])),_:2},1032,["index"])))),256))])),_:2},1032,["index"])):((0,t.wg)(),(0,t.j4)(o,{key:1,index:e.url},{title:(0,t.w5)((()=>[(0,t.Uk)((0,a.zw)(e.menuDesc),1)])),default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.j4)((0,t.LL)(p(e.iconName))))])),_:2},1024)])),_:2},1032,["index"]))],64)))),256)):((0,t.wg)(!0),(0,t.iD)(t.HY,{key:1},(0,t.Ko)(l.menus,(e=>((0,t.wg)(),(0,t.iD)(t.HY,null,[e.menus&&e.menus.length>0?((0,t.wg)(),(0,t.j4)(r,{key:0,index:e.url},{title:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.j4)((0,t.LL)(p(e.iconName))))])),_:2},1024),(0,t._)("span",null,(0,a.zw)(e.menuDesc),1)])),default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.menus,(e=>((0,t.wg)(),(0,t.j4)(o,{index:e.url},{title:(0,t.w5)((()=>[(0,t.Uk)((0,a.zw)(e.menuDesc),1)])),default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.j4)((0,t.LL)(p(e.iconName))))])),_:2},1024)])),_:2},1032,["index"])))),256))])),_:2},1032,["index"])):((0,t.wg)(),(0,t.j4)(o,{key:1,index:e.url},{title:(0,t.w5)((()=>[(0,t.Uk)((0,a.zw)(e.menuDesc),1)])),default:(0,t.w5)((()=>[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.j4)((0,t.LL)(p(e.iconName))))])),_:2},1024)])),_:2},1032,["index"]))],64)))),256))])),_:1},8,["default-active","collapse"]),(0,t._)("div",c,[(0,t.Wm)(d.Z),(0,t._)("span",w,", "+(0,a.zw)(l.user.userName),1),(0,t.Wm)(i,{onClick:g,style:{cursor:"pointer",color:"red"},size:"20"},{default:(0,t.w5)((()=>[(0,t.Wm)((0,u.SU)(s.U3h))])),_:1})])])),_:1}),(0,t.Wm)(H,{class:"container"},{default:(0,t.w5)((()=>[(0,t._)("div",f,[(0,t.Wm)(D,{modelValue:_.value,"onUpdate:modelValue":n[0]||(n[0]=e=>_.value=e),type:"card",closable:"",onTabRemove:L,style:{height:"100%"}},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(b.value,(e=>((0,t.wg)(),(0,t.j4)(j,{key:e.name,label:e.label,name:e.name,style:{height:"100%","overflow-y":"auto"}},{default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.j4)((0,t.LL)(e.component)))])),_:2},1032,["label","name"])))),128))])),_:1},8,["modelValue"])])])),_:1})])),_:1})])}}}),g=n(89);const p=(0,g.Z)(h,[["__scopeId","data-v-40769e5e"]]);var v=p}}]);
//# sourceMappingURL=139.c1a9d1bf.js.map